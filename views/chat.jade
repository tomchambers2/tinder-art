doctype html
html
    head
        meta(charset='UTF-8')
        script(src='/lib/jquery-2.1.3.min.js')
        script(src='/socket.io/socket.io.js')
        link(href='/lib/bootstrap/3.3.4/css/bootstrap.min.css' rel='stylesheet')
        script(src='/lib/bootstrap/3.3.4/js/bootstrap.min.js')
        title Chat!
        script(src='chat.js')
        link(rel='stylesheet' href='/style.css')
        link(rel='stylesheet' href='/bubbles.css')
        script(src='/lib/mousetrap.min.js')
        script(src='keyboard-shortcuts.js')
    body
        script.
            var data = {
                matchId: '#{partner._id}',
                partnerId: '#{partner.person._id}'
            }
        .row
            .col-md-8.col-sm-offset-2.text-center
                .header
                    h1 Generic dating app - connected to #{partner.person.name}
    
        .row
            .col-md-12
                .chat-screen                      
                    for item in partner.messages   
                        if item.from == partner.person._id
                            .message.triangle-isosceles.left.
                                #{item.message}
                        else
                            .message.triangle-isosceles.right.
                                #{item.message}

        .row
            .col-md-12
                .input-bar
                    .input-bar-inner
                        input.user-input(type='text')
                        input.submit(type='submit')                

        .debug.hidden
            div(class='col-md-12')
                h1 Chatting with #{partner.person.name}
                div
                    p=partner._id
                    p=partner.messages
                    p=partner.person.bio
                div=JSON.stringify(partner)